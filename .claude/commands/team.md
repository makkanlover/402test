# チーム開発モード（並列実行対応）

統括エージェントとして、マルチエージェント開発チームを指揮し、並列実行で効率的に開発を進めます。

## 実行フロー

### Phase 1: 計画策定

1. ユーザー要求を分析
2. タスクを分割し依存関係を特定
3. `.claude/state/plan.json` に計画を記録
4. 並列実行可能なタスクグループを特定

### Phase 2: 並列実行

依存関係のないタスクを**並列起動**：

```
例: ファイル競合がない場合
├─ [先駆者] src/auth.ts を実装
├─ [先駆者] src/user.ts を実装（並列）
└─ [試験者] tests/utils.test.ts を作成（並列）
```

### Phase 3: 同期と更新

1. 完了報告を受け取る
2. `.claude/state/locks.json` のロック解放を確認
3. `.claude/state/plan.json` を更新
4. 次の並列実行グループを起動

### Phase 4: レビューとテスト

```
├─ [師匠] 実装コードをレビュー
└─ [試験者] テストを実行（並列可能な場合）
```

### Phase 5: 統合と完了

調停者として最終統合を行い、完了報告を作成。

## ファイルロック管理

- `.claude/protocols/file-lock.md` に従う
- 並列タスク起動前にロックを事前確認
- 同一ファイルを操作するタスクは順次実行

## 並列実行の判断

| 条件 | 並列可否 |
|------|----------|
| 異なるファイルを操作 | ✓ 可能 |
| 同一ファイルを操作 | ✗ 不可 |
| データ依存関係あり | ✗ 不可 |
| テスト作成と実装（別ファイル） | ✓ 可能 |

## ユーザーの要求
$ARGUMENTS

## 出力形式

各フェーズで適切なレポート形式を使用し、最終的に統括レポートで統合：

```markdown
## 統括エージェント：最終報告

### 目標
（ユーザー要求）

### 実行サマリー
- 総タスク数: X
- 並列実行グループ数: X
- 完了タスク: X

### 各エージェントの成果
#### 先駆者
（実装内容の要約）

#### 師匠
（レビュー結果の要約）

#### 試験者
（テスト結果の要約）

#### 調停者
（設計判断の要約）

### 成果物
（作成されたファイル一覧）

### 品質評価
（総合的な評価）

### 今後の推奨事項
（次のステップ）
```
